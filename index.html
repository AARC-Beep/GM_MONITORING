<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SeaCrew Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-Xx8Bf4+Cx5+k7OOkGzFjT8kQoz6U0mI+oB6O+Bb3qSgHRqbt+z25Q7czD+3YB2+h3PzI0qPPyUqMQdZbw5vTQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f4f6f8; }
    .login-screen { position:fixed; top:0; left:0; width:100%; height:100%; background:#1e2a38; display:flex; align-items:center; justify-content:center; color:#fff; z-index:9999; }
    .login-box { background:#2c3e50; padding:30px; border-radius:8px; width:300px; box-shadow:0 4px 15px rgba(0,0,0,0.3); }
    .login-box input { width:100%; padding:10px; margin:8px 0; border:none; border-radius:4px; }
    .login-box button { width:100%; padding:10px; margin-top:10px; border:none; border-radius:4px; background:#3498db; color:#fff; cursor:pointer; }
    .login-box button:hover { background:#2980b9; }
    .small-note { font-size:12px; color:#aaa; }
    .sidebar { width:250px; background:#1e2a38; height:100vh; position:fixed; top:0; left:0; padding:20px; color:#fff; overflow-y:auto; }
    .sidebar a { display:block; color:#cfe8ff; padding:8px 0; text-decoration:none; }
    .sidebar a:hover { color:#fff; }
    .sidebar .section-title { font-size:14px; margin-top:20px; color:#a0c4ff; }
    .content { margin-left:270px; padding:20px; }
  </style>
</head>
<body>

<!-- LOGIN SCREEN -->
<div id="loginScreen" class="login-screen">
  <div class="login-box">
    <h3 style="margin:0 0 10px 0; text-align:center;">TIWALA — SeaCrew Dashboard</h3>
    <small class="small-note" style="display:block; text-align:center; margin-bottom:15px;">Please sign in to continue</small>
    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">
    <input type="text" id="role" placeholder="Role">
    <button id="loginBtn">Sign In</button>
    <div id="loginMsg" class="small-note" style="color:#ff6b6b; margin-top:5px;"></div>
  </div>
</div>

<!-- SIDEBAR -->
<div class="sidebar">
  <div class="section-title">Navigation</div>
  <a href="#" data-sheet="Vessel_join"><i class="fa-solid fa-ship"></i> Vessel Join</a>
  <a href="#" data-sheet="Arrivals"><i class="fa-solid fa-plane-arrival"></i> Arrivals</a>
  <a href="#" data-sheet="Updates"><i class="fa-solid fa-file-lines"></i> Updates</a>
  <a href="#" data-sheet="Memo"><i class="fa-solid fa-sticky-note"></i> Memo</a>
  <a href="#" data-sheet="Training"><i class="fa-solid fa-graduation-cap"></i> Training</a>
  <a href="#" data-sheet="Pni"><i class="fa-solid fa-id-card"></i> PNI</a>
  <a href="#" data-sheet="ChatBoard"><i class="fa-solid fa-comments"></i> ChatBoard</a>
  <a href="#" data-sheet="Users"><i class="fa-solid fa-users"></i> Users</a>

  <!-- External links requested -->
  <div style="margin-top:20px;">
    <div class="small-note" style="color:#cfe8ff; margin-bottom:6px;">Useful Tools</div>
    <a href="https://flightaware.com/live/airport/RPLL" target="_blank" rel="noopener"><i class="fa-solid fa-plane"></i> Flights — FlightAware (MNL)</a>
    <a href="https://www.msn.com/en-ph/news" target="_blank" rel="noopener"><i class="fa-solid fa-newspaper"></i> News — MSN Philippines</a>
    <a href="https://zoom.earth/" target="_blank" rel="noopener"><i class="fa-solid fa-cloud-sun"></i> Weather — Zoom Earth</a>
    <a href="https://dmw.gov.ph/" target="_blank" rel="noopener"><i class="fa-solid fa-passport"></i> DMW — Dept. of Migrant Workers</a>
    <a href="https://owwa.gov.ph/" target="_blank" rel="noopener"><i class="fa-solid fa-people-group"></i> OWWA</a>
    <a href="https://marina.gov.ph/" target="_blank" rel="noopener"><i class="fa-solid fa-anchor"></i> MARINA</a>
  </div>
</div>

<!-- MAIN CONTENT -->
<div class="content" id="mainContent">
  <h2>Welcome to SeaCrew Dashboard</h2>
  <p>Select a module from the sidebar to view data.</p>
</div>
<!-- ==================== DASHBOARD TABLES & CONTENT ==================== -->

<!-- Vessel Join Table -->
<div id="Vessel_join" class="sheet-content" style="display:none;">
  <h3>Vessel Join Records</h3>
  <button onclick="showAddModal('Vessel_join')">Add New</button>
  <table border="1" cellpadding="5" cellspacing="0" width="100%" id="table_Vessel_join">
    <thead>
      <tr>
        <th>UID</th>
        <th>Vessel Name</th>
        <th>Rank</th>
        <th>Joining Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- Arrivals Table -->
<div id="Arrivals" class="sheet-content" style="display:none;">
  <h3>Arrivals Records</h3>
  <button onclick="showAddModal('Arrivals')">Add New</button>
  <table border="1" cellpadding="5" cellspacing="0" width="100%" id="table_Arrivals">
    <thead>
      <tr>
        <th>UID</th>
        <th>Name</th>
        <th>Vessel</th>
        <th>Arrival Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- Updates Table -->
<div id="Updates" class="sheet-content" style="display:none;">
  <h3>Updates Records</h3>
  <button onclick="showAddModal('Updates')">Add New</button>
  <table border="1" cellpadding="5" cellspacing="0" width="100%" id="table_Updates">
    <thead>
      <tr>
        <th>UID</th>
        <th>Title</th>
        <th>Description</th>
        <th>Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- Memo Table -->
<div id="Memo" class="sheet-content" style="display:none;">
  <h3>Memo Records</h3>
  <button onclick="showAddModal('Memo')">Add New</button>
  <table border="1" cellpadding="5" cellspacing="0" width="100%" id="table_Memo">
    <thead>
      <tr>
        <th>UID</th>
        <th>Subject</th>
        <th>Content</th>
        <th>Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- Training Table -->
<div id="Training" class="sheet-content" style="display:none;">
  <h3>Training Records</h3>
  <button onclick="showAddModal('Training')">Add New</button>
  <table border="1" cellpadding="5" cellspacing="0" width="100%" id="table_Training">
    <thead>
      <tr>
        <th>UID</th>
        <th>Name</th>
        <th>Course</th>
        <th>Date Completed</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- PNI Table -->
<div id="Pni" class="sheet-content" style="display:none;">
  <h3>PNI Records</h3>
  <button onclick="showAddModal('Pni')">Add New</button>
  <table border="1" cellpadding="5" cellspacing="0" width="100%" id="table_Pni">
    <thead>
      <tr>
        <th>UID</th>
        <th>Name</th>
        <th>ID Number</th>
        <th>Expiry Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- ChatBoard Table -->
<div id="ChatBoard" class="sheet-content" style="display:none;">
  <h3>ChatBoard</h3>
  <div id="chatContainer" style="border:1px solid #ccc; padding:10px; height:300px; overflow-y:auto; background:#fff;"></div>
  <input type="text" id="chatMessage" placeholder="Type a message..." style="width:80%;">
  <button onclick="sendChatMessage()">Send</button>
</div>

<!-- Users Table -->
<div id="Users" class="sheet-content" style="display:none;">
  <h3>Users</h3>
  <button onclick="showAddModal('Users')">Add New</button>
  <table border="1" cellpadding="5" cellspacing="0" width="100%" id="table_Users">
    <thead>
      <tr>
        <th>UID</th>
        <th>Username</th>
        <th>Role</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- ==================== ADD/UPDATE MODAL ==================== -->
<div id="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); align-items:center; justify-content:center;">
  <div style="background:#fff; padding:20px; border-radius:8px; width:400px; max-height:80%; overflow-y:auto;">
    <h3 id="modalTitle">Add Record</h3>
    <div id="modalFields"></div>
    <button onclick="submitModal()">Submit</button>
    <button onclick="closeModal()">Cancel</button>
  </div>
</div>
<!-- ==================== FOOTER & STATUS ==================== -->
<div id="statusBar" style="position:fixed; bottom:0; left:0; width:100%; background:#222; color:#cfe8ff; padding:5px; font-size:12px; text-align:center;">
  SeaCrew Dashboard — Status: <span id="statusText">Initializing...</span>
</div>

<!-- ==================== MODAL FOR CONFIRMATION ==================== -->
<div id="confirmModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); align-items:center; justify-content:center;">
  <div style="background:#fff; padding:20px; border-radius:8px; width:300px; text-align:center;">
    <p id="confirmMessage">Are you sure?</p>
    <button onclick="confirmYes()">Yes</button>
    <button onclick="confirmNo()">No</button>
  </div>
</div>

<!-- ==================== INITIALIZATION SCRIPT ==================== -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    console.log("SeaCrew Dashboard initializing...");
    setStatus("Loading sheets...");
    
    // Populate sidebar, login, and initialize first sheet
    initializeSidebar();
    initializeLogin();

    // Fetch all sheet data
    fetchAllSheets();
  });

  function setStatus(message) {
    document.getElementById('statusText').textContent = message;
  }

  function showSheet(sheetId) {
    const sheets = document.querySelectorAll('.sheet-content');
    sheets.forEach(s => s.style.display = 'none');
    const sheet = document.getElementById(sheetId);
    if (sheet) sheet.style.display = 'block';
    setStatus(sheetId + " loaded");
  }

  // Placeholder functions for login and fetchAll
  function initializeLogin() {
    const loginScreen = document.getElementById('loginScreen');
    if (loginScreen) loginScreen.style.display = 'block';
  }

  function initializeSidebar() {
    const sidebarLinks = document.querySelectorAll('.sidebar a');
    sidebarLinks.forEach(link => {
      link.addEventListener('click', function (e) {
        e.preventDefault();
        const target = this.getAttribute('data-target');
        if (target) showSheet(target);
      });
    });
  }

  function fetchAllSheets() {
    // This will call your Apps Script backend via JS (Parts 3A–3F)
    console.log("Fetching all sheet data...");
    // Example: fetchData('Vessel_join'); etc.
  }
</script>
